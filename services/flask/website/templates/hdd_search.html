{% extends "base.html" %}
{% import "bootstrap5/form.html" as wtf %}
{% import "_macros.html" as macros %}

{% block title %}HDD Search{% endblock %}
{% block content %}
<body>
<div class="container">
    <form method="POST">
    {{ form.hidden_tag() }}
        <div class="row" style="margin-top: 50px;background: rgb(52,58,64);padding: 10px;">
            <div class="col d-xxl-flex justify-content-xxl-center align-items-xxl-center">
                {{ form.startdate }}
            </div>
            <div class="col d-xxl-flex justify-content-xxl-center align-items-xxl-center">
                {{ form.enddate }}
            </div>
            <div class="col d-xxl-flex justify-content-xxl-center align-items-xxl-center">
                {{ form.select }}
            </div>
            <div class="col d-xxl-flex justify-content-xxl-center align-items-xxl-center">
                {{ form.search (style="color: rgb(255,255,255);background: transparent;border-color: rgb(255,255,255);") }}
            </div>
        </div>
        <div class="row" style="background: rgb(52,58,64);padding: 10px;">
            <div class="col d-xxl-flex justify-content-xxl-center align-items-xxl-center">
                {{ form.submit (class="login-button") }}
            </div>
            {% if pagination %}
                <div class="col d-xxl-flex justify-content-xxl-center align-items-xxl-center">
                    {{ form.downl(formnovalidate=True, class="login-button") }}
                </div>
            {% endif %}
            <div class="col d-xxl-flex justify-content-xxl-center align-items-xxl-center">
                {{ form.clear(formnovalidate=True, class="login-button") }}
            </div>
        </div>
    </form>
    {% if count %}
        <div class="row" style="margin-top: 15px;background: rgb(255,255,255);">
            <div class="col d-xl-flex justify-content-xl-center align-items-xl-center" style="background: rgb(255,255,255);">
                <span>Search returned {{ count }} results.</span>
            </div>
        </div>
        <div class="row" style="background: rgb(255,255,255);">
            <div class="col d-xl-flex justify-content-xl-center align-items-xl-center" style="background: rgb(255,255,255);">
                <span>There are {{ quality_count }} good results returned.</span>
            </div>
        </div>
    {% endif %}
    {% if pagination %}
        <div class="table-responsive" style="max-height: 450px;">
        <table class="table">
            <thead class="sticky-header" style="background: rgb(34,37,41);">
            <tr style="background: rgb(34,37,41);">
                <th style="background: rgb(34,37,41);color: rgb(255,255,255);">Process</th>
                <th style="background: rgb(34,37,41);color: rgb(255,255,255);">Finished</th>
                <th style="background: rgb(34,37,41);color: rgb(255,255,255);">Batch Started</th>
                <th style="background: rgb(34,37,41);color: rgb(255,255,255);">Batch</th>
                <th style="background: rgb(34,37,41);color: rgb(255,255,255);">Success</th>
                <th style="background: rgb(34,37,41);color: rgb(255,255,255);">Status</th>
                <th style="background: rgb(34,37,41);color: rgb(255,255,255);">Method</th>
                <th style="background: rgb(34,37,41);color: rgb(255,255,255);">Progress</th>
                <th style="background: rgb(34,37,41);color: rgb(255,255,255);">Disk Serial</th>
                <th style="background: rgb(34,37,41);color: rgb(255,255,255);">Disk Info</th>
                <th style="background: rgb(34,37,41);color: rgb(255,255,255);">DiskSizeStr</th>
                <th style="background: rgb(34,37,41);color: rgb(255,255,255);">Provider</th>
                <th style="background: rgb(34,37,41);color: rgb(255,255,255);">ProviderVer</th>
                <th style="background: rgb(34,37,41);color: rgb(255,255,255);">Host</th>
                <th style="background: rgb(34,37,41);color: rgb(255,255,255);">Err Msg</th>
            </tr>
            </thead>
            <tbody>
            {% for row in pagination.items %}
                <tr style="border: 1px solid rgb(0,0,0);">
                    <td>{{ row.Process }}</td>
                    <td>{{ row.Finished }}</td>
                    <td>{{ row.BatchStarted }}</td>
                    <td>{{ row.Batch }}</td>
                    <td>{{ row.Success }}</td>
                    <td>{{ row.Status }}</td>
                    <td>{{ row.Method }}</td>
                    <td>{{ row.Progress }}</td>
                    <td>{{ row.DiskSerial }}</td>
                    <td>{{ row.DiskInfo }}</td>
                    <td>{{ row.DiskSizeStr }}</td>
                    <td>{{ row.Provider }}</td>
                    <td>{{ row.ProviderVer }}</td>
                    <td>{{ row.Host }}</td>
                    <td>{{ row.ErrMsg }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}
    {% if pagination %}
        <div class="row" style="background: rgb(255,255,255);">
            <div class="col d-xl-flex justify-content-xl-center align-items-xl-center" style="background: rgb(255,255,255); margin-top: 10px;">
                {{ macros.pagination_widget(pagination, 'searchviews.hdd_search', select=select, search=search, start_date=start_date, end_date=end_date) }}
            </div>
        </div>
        <div class="row" style="background: rgb(255,255,255);">
            <div class="col d-xl-flex justify-content-xl-center align-items-xl-center" style="background: rgb(255,255,255);">
                <span style="margin-bottom: 10px;">Showing page {{ pagination.page }} of {{ pagination.pages }}</span>
            </div>
        </div>
    {% endif %}
</div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
{% endblock %}

