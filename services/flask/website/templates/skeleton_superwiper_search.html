{% extends "base.html" %}
{% import "bootstrap5/form.html" as wtf %}
{% import "_macros.html" as macros %}

{% block title %}HDD Search{% endblock %}
{% block head %}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}
{% block content %}
<body>
<div class="container">
    <form method="POST">
    {{ data.form.hidden_tag() }}
        <div class="row" style="margin-top: 50px;background: rgb(52,58,64);padding: 10px;">
            <div class="col d-xxl-flex justify-content-xxl-center align-items-xxl-center">
                <h4 style="color: white; margin: 10px">Start Date: </h4>
                <span>{{ data.form.startdate }}</span>
            </div>
            <div class="col d-xxl-flex justify-content-xxl-center align-items-xxl-center">
                <h4 style="color: white; margin: 10px">End Date: </h4>
                {{ data.form.enddate }}
            </div>
            <div class="col d-xxl-flex justify-content-xxl-center align-items-xxl-center">
                <h4 style="color: white; margin: 10px">Serial: </h4>
                {{ data.form.search (style="color: rgb(255,255,255);background: transparent;border-color: rgb(255,255,255);") }}
            </div>
        </div>
        <div class="row" style="background: rgb(52,58,64);padding: 10px;">
            <div class="col d-xxl-flex justify-content-xxl-center align-items-xxl-center">
                {{ data.form.submit (class="login-button") }}
            </div>
            {% if pagination %}
                <div class="col d-xxl-flex justify-content-xxl-center align-items-xxl-center">
                    {{ data.form.downl(formnovalidate=True, class="login-button") }}
                </div>
            {% endif %}
            <div class="col d-xxl-flex justify-content-xxl-center align-items-xxl-center">
                {{ data.form.clear(formnovalidate=True, class="login-button") }}
            </div>
        </div>
    </form>
    {% if data.count %}
        <div class="row" style="margin-top: 15px;background: rgb(255,255,255);">
            <div class="col d-xl-flex justify-content-xl-center align-items-xl-center" style="background: rgb(255,255,255);">
                <span>Search returned {{ data.count }} results.</span>
            </div>
        </div>
    {% endif %}
    {% if data.pagination %}
        <div class="table-responsive" style="max-height: 450px;">
        <table class="table">
            <thead class="sticky-header" style="background: rgb(34,37,41);">
            <tr style="background: rgb(34,37,41);">
                <th style="background: rgb(34,37,41);color: rgb(255,255,255);">Process</th>
                <th style="background: rgb(34,37,41);color: rgb(255,255,255);">Finished</th>
                <th style="background: rgb(34,37,41);color: rgb(255,255,255);">Batch Started</th>
                <th style="background: rgb(34,37,41);color: rgb(255,255,255);">Batch</th>
                <th style="background: rgb(34,37,41);color: rgb(255,255,255);">Success</th>
                <th style="background: rgb(34,37,41);color: rgb(255,255,255);">Status</th>
                <th style="background: rgb(34,37,41);color: rgb(255,255,255);">Method</th>
                <th style="background: rgb(34,37,41);color: rgb(255,255,255);">Progress</th>
                <th style="background: rgb(34,37,41);color: rgb(255,255,255);">Disk Serial</th>
                <th style="background: rgb(34,37,41);color: rgb(255,255,255);">Disk Info</th>
                <th style="background: rgb(34,37,41);color: rgb(255,255,255);">DiskSizeStr</th>
                <th style="background: rgb(34,37,41);color: rgb(255,255,255);">Provider</th>
                <th style="background: rgb(34,37,41);color: rgb(255,255,255);">ProviderVer</th>
                <th style="background: rgb(34,37,41);color: rgb(255,255,255);">Host</th>
                <th style="background: rgb(34,37,41);color: rgb(255,255,255);">Err Msg</th>
            </tr>
            </thead>
            <tbody>
            {% for row in data.pagination.items %}
                <tr style="border: 1px solid rgb(0,0,0);">
                {% for item in row %}
                    <td>{{ item }}</td>
                {% endfor %}
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}
    {% if data.pagination %}
        <div class="row" style="background: rgb(255,255,255);">
            <div class="col d-xl-flex justify-content-xl-center align-items-xl-center" style="background: rgb(255,255,255); margin-top: 10px;">
                {{ macros.pagination_widget(data.pagination, 'searchviews.hdd_search', data=data) }}
            </div>
        </div>
        <div class="row" style="background: rgb(255,255,255);">
            <div class="col d-xl-flex justify-content-xl-center align-items-xl-center" style="background: rgb(255,255,255);">
                <span style="margin-bottom: 10px;">Showing page {{ data.pagination.page }} of {{ data.pagination.pages }}</span>
            </div>
        </div>
    {% endif %}
</div>

</body>
{% endblock %}

