{% extends "base.html" %}
{% import "_macros.html" as macros %}
{% block head %}
    <script src="../static/print_qr.js"></script>
    <link
        rel="stylesheet"
        type="text/css"
        media="print"
        href={{ url_for('static', filename='printstyles.css') }}
    />
{% endblock %}
{% block content %}
<body>
<div class="container">
    <form method="POST">
        {{ form.hidden_tag() }}
        <div class="row" style="margin-top: 50px;padding-top: 10px;padding-bottom: 10px;background: rgb(52,58,64);height: 120px;">
            <div class="col d-xxl-flex justify-content-xxl-center align-items-xxl-center">
                <span style="color: rgb(255,255,255); white-space: nowrap;">BOL #:</span>
            </div>
            <div class="col d-xxl-flex justify-content-xxl-center align-items-xxl-center">
                {{ form.bol_number (style="margin-left: 10px;background: transparent;color: rgb(255,255,255);") }}
            </div>
            <div class="col d-xxl-flex justify-content-xxl-center align-items-xxl-center">
                <span style="color: rgb(255,255,255); white-space: nowrap;">Customer Name:</span>
            </div>
            <div class="col d-xxl-flex justify-content-xxl-center align-items-xxl-center">
                {{ form.customer_name (style="margin-left: 10px;background: transparent;color: rgb(255,255,255);") }}
            </div>
            <div class="col d-xxl-flex justify-content-xxl-center align-items-xxl-center">
                <span style="color: rgb(255,255,255); white-space: nowrap;">Sales Rep:</span>
            </div>
            <div class="col d-xxl-flex justify-content-xxl-center align-items-xxl-center">
                {{ form.sales_rep (style="margin-left: 10px;background: transparent;color: rgb(255,255,255);") }}
            </div>
            <div class="col d-xxl-flex justify-content-xxl-center align-items-xxl-center">
                <span style="color: rgb(255,255,255); white-space: nowrap;">Lot #:</span>
            </div>
            <div class="col d-xxl-flex justify-content-xxl-center align-items-xxl-center">
                {{ form.lot_num (style="margin-left: 10px;background: transparent;color: rgb(255,255,255);") }}
            </div>
            <div class="col d-xxl-flex justify-content-xxl-center align-items-xxl-center">
                {{ form.submit (class="login-button", style="margin-left: 15px;") }}
            </div>
        </div>
    </form>
    {% if results %}
        <div style="max-height: 450px; overflow-y: auto; width: auto; margin-top: 30px;">
            <div>
                <div class="row" style="background: rgb(255,255,255);width: auto;">
                    <div class="col d-xxl-flex justify-content-xxl-center align-items-xxl-center" style="background: rgb(52,58,64);">
                        <span style="color: rgb(255,255,255);font-size: 30px;">Customer</span>
                    </div>
                    <div class="col d-xxl-flex justify-content-xxl-center align-items-xxl-center" style="background: rgb(52,58,64);">
                        <span style="color: rgb(255,255,255);font-size: 30px;">QR Code</span>
                    </div>
                </div>
            </div>
            {% for column in results %}
                <div class="row">
                    <div class="col d-xxl-flex justify-content-xxl-center align-items-xxl-center" style="border: 1px solid black ;color: black;background: rgb(255,255,255); padding: 20px;">
                        {{ column.customer_name }}
                    </div>
                    <div class="col d-xxl-flex justify-content-xxl-center align-items-xxl-center" style="background: rgb(255,255,255);border: 1px solid black ;">
                        <!-- Create a button to show the QR code -->
                        <button class="login-button" onclick='showQR("{{ column.customer_name }}")'>Show QR</button>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% endif %}
    {% if results or form.bol_number.data or form.sales_rep.data or form.lot_num.data %}
        <div class="row qr-display-div" style="padding: 15px; min-height: 150px;" id="qr-display">
            {% if form.bol_number.data %}
                <div class="col d-xxl-flex justify-content-xxl-center align-items-xxl-center qr-item" style="background: white; padding: 15px;">
                    <img src="{{ qrcode(form.bol_number.data)}}" alt="" width="100">
                    <span style="padding-left: 10px;">{{(form.bol_number.data)}}</span>
                </div>
            {% endif %}
            {% if form.sales_rep.data %}
                <div class="col d-xxl-flex justify-content-xxl-center align-items-xxl-center qr-item" style="background: white; padding: 15px;">
                    <img src="{{ qrcode(form.sales_rep.data) }}" alt="" width="100">
                    <span style="padding-left: 10px;">{{(form.sales_rep.data)}}</span>
                </div>
            {% endif %}
            {% if form.lot_num.data %}
                <div class="col d-xxl-flex justify-content-xxl-center align-items-xxl-center qr-item" style="background: white; padding: 15px;">
                    <img src="{{ qrcode(form.lot_num.data) }}" alt="" width="100">
                    <span style="padding-left: 10px;">{{(form.lot_num.data)}}</span>
                </div>
            {% endif %}
            <div class="col d-xxl-flex justify-content-xxl-center align-items-xxl-center qr-item" style="background: white; padding: 15px;">
                <img id="selected-qr" src="" alt="" width="100">
                <span id="selected_customer" style="padding-left: 10px;"></span>
            </div>
        </div>
        <div class="row">
            <div class="col d-xxl-flex justify-content-xxl-center align-items-xxl-center" style="background: white; padding: 10px;">
                <button class="login-button" onclick="printQR()" id="print-button">Print</button>
            </div>
        </div>
    {% endif %}
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
{% endblock %}